<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<title>이벤트 처리</title>
</head>

<body>
	<h3>#선물보내기</h3>
	<div style="line-height: 2; width:400px;">
		<div>
			받을사람 추가: <input type="text" style="padding:4px; width: 60px;" id="input" />
		</div>
		<hr />
		<form>
			<div style="display:flex; gap: 5px; margin-bottom: 4px;" id="names" >

			</div>
			<div>
				<textarea style="width:100%; height:100px; resize: none;" name="message" id="msg"></textarea>
				<div style="text-align: right;">
					<span id="cnt">0</span> / 100
				</div>
			</div>
			<button>전송하기</button>
		</form>
	</div>


	<script>
		document.querySelector("#msg").addEventListener("keyup", function(evt) {
			const length = evt.target.value.length;
			// evt.target.nextElementSibling.firstElementChild.firtChild.nodeValue = length;
			console.log(evt.target.nextElementSibling.firstElementChild.firstChild);
			// evt.target.nextElementSibling.firstElementChild.firstChild.nodeValue = length;
			document.querySelector("#cnt").firstChild.nodeValue = length;
			if(length>100) {
				window.alert("최대 글자는 100글자입니다.");
				evt.target.value = evt.target.value.substr(0, 100);
				// document.querySelector("#cnt").firstChild.nodeValue=100;
			}
		});
		
		
		document.querySelector("#input").onkeydown = function (evt) {
			if (evt.keyCode !== 13) {
				return;
			}
			const value = evt.target.value;
			const $div = document.createElement("div");
			$div.appendChild(document.createTextNode("#" + value));
			// document.querySelector("#names").appendChild($div);
			const $input = document.createElement("input");
			$input.type = "text";
			$input.name = "target";
			$input.value = value;
			$input.readOnly= true;
			$input.style.width="60px"
			$input.style.padding="4px"
			
			document.querySelector("#names").appendChild($input);
			evt.target.value = '';
		}

	</script>

</body>




</html>